<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Demo导航页</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        
        body {
            background-color: #5cc2f1;
            font-size: 14px;
            margin: 0px;
        }

        #container {
            width: 70vw;
            margin: 0px auto;
            background-color: #fff;
        }

        #container ul {
            list-style: none;
            padding: 10px;
        }

        #container ul li {
            border-bottom: 10px solid #ccc;
            overflow: hidden;
        }

        #container ul li:last-child {
            border: 0px;
        }

        #container ul li h3 {
            padding-bottom: 5px;
            border-bottom: 1px solid #ccc;
        }

        #container ul h3 a {
            color: #000;
            text-decoration: none;
            font-size: 18px;
            line-height: 20px;
            font-weight: bold;
        }

        #container ul h3 a:hover {
            color: green;
        }
        
        #container ul p {
            text-indent: 2em;
            margin-top: 12px;
            margin-bottom: 12px;
            line-height: 24px;
        }

        #container ul img {
            width: 100%;
        }

        .viewpop {
            display:flex;
            align-items:center;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,.8);
            z-index: 1000;
        }
        .viewpop img {
            display: block;
            max-width: 100%;
            width: auto;
            height: auto;
        }
        .dn {
            display: none;
        }
    </style>

</head>

<body>
    <div id="container">
        <ul>
            <li>
                <h3><a href="https://zhaoshaobang.github.io/demo/cardChange/index.html">卡片堆叠切换</a></h3>
                <p>堆叠卡片切换效果，主要利用CSS3中的translate3d、perspective等特性实现。
                通过perspective透视效果，使卡片形成堆叠的效果。再利用zIndex设置层级关系，然后通过算法控制卡片的切换及显隐。
                该效果难点在于如何在切换过程中重置zIndex属性，使其形成循环显示的效果。</p>
                <img src="https://zhaoshaobang.github.io/demo/cardChange/img/code.png" />
            </li>
        </ul>
    </div>
    <div class="viewpop dn">
        <img src="https://zhaoshaobang.github.io/demo/cardChange/img/code.png"/>
    </div> 
    <script>
        var container = document.getElementById('container');
        var viewpop = document.getElementsByClassName('viewpop')[0];
        var popImg = viewpop.getElementsByTagName('img')[0];
        container.addEventListener('click', function (e) {
            var target = e.target;
            if(target.tagName.toLowerCase() == 'img') {
                var url = target.getAttribute('src');
                popImg.setAttribute('src', url);
                removeClass(viewpop, 'dn');
            }
        })

        viewpop.addEventListener('click', function (e) {
            if(!hasClass(viewpop, 'dn')) {
                addClass(viewpop, 'dn');
            }
        })

        function addClass(el, className) {
            var classAry = el.getAttribute('class').split(/\s+/g);
            if(classAry.indexOf(className) < 0) {
                classAry.push(className);
            }
            var newClass = classAry.join(' ');
            el.setAttribute('class', newClass);
        }
        
        function removeClass(el, className) {
            var classAry = el.getAttribute('class').split(/\s+/g);
            var index = classAry.indexOf(className);
            if(index >= 0) {
                classAry.splice(index, 1);
            }
            var newClass = classAry.join(' ');
            el.setAttribute('class', newClass);
        }

        function hasClass(el, className) {
            var classAry = el.getAttribute('class').split(/\s+/g);
            var index = classAry.indexOf(className);
            if(index >= 0) {
                return true;
            }
            return false;
        }

    </script>
</body>

</html>